import{c as y}from"./classnames-feG2F_pn.js";import{r as C,a as c}from"./react-10p77hjm.js";import{e as R,b as B,g as ue,d as ce,h as de,c as le,f as Ce}from"./@babel-W7-Wn9hY.js";import{A as Ee,t as Se}from"./rc-util-ZPCrP7KH.js";function O(n){return!!(n.addonBefore||n.addonAfter)}function re(n){return!!(n.prefix||n.suffix||n.allowClear)}function se(n,e,r,d){if(r){var a=e;if(e.type==="click"){var l=n.cloneNode(!0);a=Object.create(e,{target:{value:l},currentTarget:{value:l}}),l.value="",r(a);return}if(d!==void 0){var g=n.cloneNode(!0);a=Object.create(e,{target:{value:g},currentTarget:{value:g}}),g.type!=="file"&&(g.value=d),r(a);return}r(a)}}function we(n,e){if(n){n.focus(e);var r=e||{},d=r.cursor;if(d){var a=n.value.length;switch(d){case"start":n.setSelectionRange(0,0);break;case"end":n.setSelectionRange(a,a);break;default:n.setSelectionRange(0,a)}}}}var Ne=function(e){var r,d,a=e.inputElement,l=e.prefixCls,g=e.prefix,I=e.suffix,j=e.addonBefore,E=e.addonAfter,F=e.className,K=e.style,J=e.disabled,Q=e.readOnly,L=e.focused,W=e.triggerFocus,x=e.allowClear,_=e.value,T=e.handleReset,$=e.hidden,u=e.classes,i=e.classNames,D=e.dataAttrs,m=e.styles,f=e.components,ee=(f==null?void 0:f.affixWrapper)||"span",U=(f==null?void 0:f.groupWrapper)||"span",ne=(f==null?void 0:f.wrapper)||"span",p=(f==null?void 0:f.groupAddon)||"span",M=C.useRef(null),s=function(h){var N;(N=M.current)!==null&&N!==void 0&&N.contains(h.target)&&(W==null||W())},z=function(){var h;if(!x)return null;var N=!J&&!Q&&_,q="".concat(l,"-clear-icon"),Z=ce(x)==="object"&&x!==null&&x!==void 0&&x.clearIcon?x.clearIcon:"âœ–";return c.createElement("span",{onClick:T,onMouseDown:function(ae){return ae.preventDefault()},className:y(q,(h={},B(h,"".concat(q,"-hidden"),!N),B(h,"".concat(q,"-has-suffix"),!!I),h)),role:"button",tabIndex:-1},Z)},P=C.cloneElement(a,{value:_,hidden:$,className:y((r=a.props)===null||r===void 0?void 0:r.className,!re(e)&&!O(e)&&F)||null,style:R(R({},(d=a.props)===null||d===void 0?void 0:d.style),!re(e)&&!O(e)?K:{})});if(re(e)){var S,w="".concat(l,"-affix-wrapper"),X=y(w,(S={},B(S,"".concat(w,"-disabled"),J),B(S,"".concat(w,"-focused"),L),B(S,"".concat(w,"-readonly"),Q),B(S,"".concat(w,"-input-with-clear-btn"),I&&x&&_),S),!O(e)&&F,u==null?void 0:u.affixWrapper,i==null?void 0:i.affixWrapper),G=(I||x)&&c.createElement("span",{className:y("".concat(l,"-suffix"),i==null?void 0:i.suffix),style:m==null?void 0:m.suffix},z(),I);P=c.createElement(ee,ue({className:X,style:R(R({},O(e)?void 0:K),m==null?void 0:m.affixWrapper),hidden:!O(e)&&$,onClick:s},D==null?void 0:D.affixWrapper,{ref:M}),g&&c.createElement("span",{className:y("".concat(l,"-prefix"),i==null?void 0:i.prefix),style:m==null?void 0:m.prefix},g),C.cloneElement(a,{value:_,hidden:null}),G)}if(O(e)){var Y="".concat(l,"-group"),H="".concat(Y,"-addon"),V=y("".concat(l,"-wrapper"),Y,u==null?void 0:u.wrapper),te=y("".concat(l,"-group-wrapper"),F,u==null?void 0:u.group);return c.createElement(U,{className:te,style:K,hidden:$},c.createElement(ne,{className:V},j&&c.createElement(p,{className:H},j),C.cloneElement(P,{hidden:null}),E&&c.createElement(p,{className:H},E)))}return P},be=["show"];function Re(n,e){return C.useMemo(function(){var r={};e&&(r.show=ce(e)==="object"&&e.formatter?e.formatter:!!e),r=R(R({},r),n);var d=r,a=d.show,l=de(d,be);return R(R({},l),{},{show:!!a,showFormatter:typeof a=="function"?a:void 0,strategy:l.strategy||function(g){return g.length}})},[n,e])}var Ie=["autoComplete","onChange","onFocus","onBlur","onPressEnter","onKeyDown","prefixCls","disabled","htmlSize","className","maxLength","suffix","showCount","count","type","classes","classNames","styles","onCompositionStart","onCompositionEnd"],De=C.forwardRef(function(n,e){var r=n.autoComplete,d=n.onChange,a=n.onFocus,l=n.onBlur,g=n.onPressEnter,I=n.onKeyDown,j=n.prefixCls,E=j===void 0?"rc-input":j,F=n.disabled,K=n.htmlSize,J=n.className,Q=n.maxLength,L=n.suffix,W=n.showCount,x=n.count,_=n.type,T=_===void 0?"text":_,$=n.classes,u=n.classNames,i=n.styles,D=n.onCompositionStart,m=n.onCompositionEnd,f=de(n,Ie),ee=C.useState(!1),U=le(ee,2),ne=U[0],p=U[1],M=c.useRef(!1),s=C.useRef(null),z=function(t){s.current&&we(s.current,t)},P=Ee(n.defaultValue,{value:n.value}),S=le(P,2),w=S[0],X=S[1],G=w==null?"":String(w),Y=c.useState(null),H=le(Y,2),V=H[0],te=H[1],v=Re(x,W),h=v.max||Q,N=v.strategy(G),q=!!h&&N>h;C.useImperativeHandle(e,function(){return{focus:z,blur:function(){var t;(t=s.current)===null||t===void 0||t.blur()},setSelectionRange:function(t,b,A){var k;(k=s.current)===null||k===void 0||k.setSelectionRange(t,b,A)},select:function(){var t;(t=s.current)===null||t===void 0||t.select()},input:s.current}}),C.useEffect(function(){p(function(o){return o&&F?!1:o})},[F]);var Z=function(t,b){var A=b;if(!M.current&&v.exceedFormatter&&v.max&&v.strategy(b)>v.max&&(A=v.exceedFormatter(b,{max:v.max}),b!==A)){var k,oe;te([((k=s.current)===null||k===void 0?void 0:k.selectionStart)||0,((oe=s.current)===null||oe===void 0?void 0:oe.selectionEnd)||0])}X(A),s.current&&se(s.current,t,d,A)};c.useEffect(function(){if(V){var o;(o=s.current)===null||o===void 0||o.setSelectionRange.apply(o,Ce(V))}},[V]);var ie=function(t){Z(t,t.target.value)},ae=function(t){M.current=!1,Z(t,t.currentTarget.value),m==null||m(t)},fe=function(t){g&&t.key==="Enter"&&g(t),I==null||I(t)},ve=function(t){p(!0),a==null||a(t)},me=function(t){p(!1),l==null||l(t)},ge=function(t){X(""),z(),s.current&&se(s.current,t,d)},he=q&&"".concat(E,"-out-of-range"),xe=function(){var t=Se(n,["prefixCls","onPressEnter","addonBefore","addonAfter","prefix","suffix","allowClear","defaultValue","showCount","count","classes","htmlSize","styles","classNames"]);return c.createElement("input",ue({autoComplete:r},t,{onChange:ie,onFocus:ve,onBlur:me,onKeyDown:fe,className:y(E,B({},"".concat(E,"-disabled"),F),u==null?void 0:u.input),style:i==null?void 0:i.input,ref:s,size:K,type:T,onCompositionStart:function(A){M.current=!0,D==null||D(A)},onCompositionEnd:ae}))},ye=function(){var t=Number(h)>0;if(L||v.show){var b=v.showFormatter?v.showFormatter({value:G,count:N,maxLength:h}):"".concat(N).concat(t?" / ".concat(h):"");return c.createElement(c.Fragment,null,v.show&&c.createElement("span",{className:y("".concat(E,"-show-count-suffix"),B({},"".concat(E,"-show-count-has-suffix"),!!L),u==null?void 0:u.count),style:R({},i==null?void 0:i.count)},b),L)}return null};return c.createElement(Ne,ue({},f,{prefixCls:E,className:y(J,he),inputElement:xe(),handleReset:ge,value:G,focused:ne,triggerFocus:z,suffix:ye(),disabled:F,classes:$,classNames:u,styles:i}))});export{Ne as B,De as I,se as r,Re as u};
