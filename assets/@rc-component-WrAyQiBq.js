import{c as b,f as oa,g as Pa,e as V,h as Ra}from"./@babel-3ekFMeiY.js";import{r as t}from"./react-v0wmBK7J.js";import{r as Ea}from"./react-dom-UBVWOR3A.js";import{c as _r,a as Z,d as Wa,u as za,r as va,s as Da,e as Ta,f as Ba,h as Ha,i as Ve,j as ia,k as xa,l as ca,g as ua,m as Fa,n as _a}from"./rc-util-lDugnv_t.js";import{c as rr}from"./classnames-TtJ58xUH.js";import{R as La}from"./rc-resize-observer-o3VbKI9v.js";import{C as ka}from"./rc-motion-3OQy_Jtq.js";import"./react-is-q81m-9gd.js";var $a=t.createContext(null),fa=[];function Aa(e,a){var r=t.useState(function(){if(!_r())return null;var m=document.createElement("div");return m}),n=b(r,1),i=n[0],l=t.useRef(!1),v=t.useContext($a),c=t.useState(fa),d=b(c,2),h=d[0],P=d[1],g=v||(l.current?void 0:function(m){P(function(S){var T=[m].concat(oa(S));return T})});function D(){i.parentElement||document.body.appendChild(i),l.current=!0}function f(){var m;(m=i.parentElement)===null||m===void 0||m.removeChild(i),l.current=!1}return Z(function(){return e?v?v(D):D():f(),f},[e]),Z(function(){h.length&&(h.forEach(function(m){return m()}),P(fa))},[h]),[i,g]}function Ua(){return document.body.scrollHeight>(window.innerHeight||document.documentElement.clientHeight)&&window.innerWidth>document.body.offsetWidth}var Va="rc-util-locker-".concat(Date.now()),da=0;function qa(e){var a=!!e,r=t.useState(function(){return da+=1,"".concat(Va,"_").concat(da)}),n=b(r,1),i=n[0];Z(function(){if(a){var l=Wa(document.body).width,v=Ua();za(`
html body {
  overflow-y: hidden;
  `.concat(v?"width: calc(100% - ".concat(l,"px);"):"",`
}`),i)}else va(i);return function(){va(i)}},[a,i])}var ha=!1;function Qa(e){return typeof e=="boolean"&&(ha=e),ha}var ma=function(a){return a===!1?!1:!_r()||!a?null:typeof a=="string"?document.querySelector(a):typeof a=="function"?a():a},Na=t.forwardRef(function(e,a){var r=e.open,n=e.autoLock,i=e.getContainer;e.debug;var l=e.autoDestroy,v=l===void 0?!0:l,c=e.children,d=t.useState(r),h=b(d,2),P=h[0],g=h[1],D=P||r;t.useEffect(function(){(v||r)&&g(r)},[r,v]);var f=t.useState(function(){return ma(i)}),m=b(f,2),S=m[0],T=m[1];t.useEffect(function(){var U=ma(i);T(U??null)});var E=Aa(D&&!S),L=b(E,2),y=L[0],u=L[1],B=S??y;qa(n&&r&&_r()&&(B===y||B===document.body));var q=null;if(c&&Da(c)&&a){var j=c;q=j.ref}var I=Ta(q,a);if(!D||!_r()||S===void 0)return null;var re=B===!1||Qa(),_=c;return a&&(_=t.cloneElement(c,{ref:I})),t.createElement($a.Provider,{value:u},re?_:Ea.createPortal(_,B))});function ja(e){var a=e.prefixCls,r=e.align,n=e.arrow,i=e.arrowPos,l=n||{},v=l.className,c=l.content,d=i.x,h=d===void 0?0:d,P=i.y,g=P===void 0?0:P,D=t.useRef();if(!r||!r.points)return null;var f={position:"absolute"};if(r.autoArrow!==!1){var m=r.points[0],S=r.points[1],T=m[0],E=m[1],L=S[0],y=S[1];T===L||!["t","b"].includes(T)?f.top=g:T==="t"?f.top=0:f.bottom=0,E===y||!["l","r"].includes(E)?f.left=h:E==="l"?f.left=0:f.right=0}return t.createElement("div",{ref:D,className:rr("".concat(a,"-arrow"),v),style:f},c)}function Ja(e){var a=e.prefixCls,r=e.open,n=e.zIndex,i=e.mask,l=e.motion;return i?t.createElement(ka,Pa({},l,{motionAppear:!0,visible:r,removeOnLeave:!0}),function(v){var c=v.className;return t.createElement("div",{style:{zIndex:n},className:rr("".concat(a,"-mask"),c)})}):null}var Ga=t.memo(function(e){var a=e.children;return a},function(e,a){return a.cache}),Ka=t.forwardRef(function(e,a){var r=e.popup,n=e.className,i=e.prefixCls,l=e.style,v=e.target,c=e.onVisibleChanged,d=e.open,h=e.keepDom,P=e.fresh,g=e.onClick,D=e.mask,f=e.arrow,m=e.arrowPos,S=e.align,T=e.motion,E=e.maskMotion,L=e.forceRender,y=e.getPopupContainer,u=e.autoDestroy,B=e.portal,q=e.zIndex,j=e.onMouseEnter,I=e.onMouseLeave,re=e.onPointerEnter,_=e.ready,U=e.offsetX,de=e.offsetY,he=e.offsetR,ie=e.offsetB,me=e.onAlign,W=e.onPrepare,H=e.stretch,M=e.targetWidth,Y=e.targetHeight,k=typeof r=="function"?r():r,ue=d||h,ae=(y==null?void 0:y.length)>0,ar=t.useState(!y||!ae),qe=b(ar,2),ge=qe[0],Qe=qe[1];if(Z(function(){!ge&&ae&&v&&Qe(!0)},[ge,ae,v]),!ge)return null;var te="auto",x={left:"-1000vw",top:"-1000vh",right:te,bottom:te};if(_||!d){var X,le=S.points,se=S.dynamicInset||((X=S._experimental)===null||X===void 0?void 0:X.dynamicInset),je=se&&le[0][1]==="r",tr=se&&le[0][0]==="b";je?(x.right=he,x.left=te):(x.left=U,x.right=te),tr?(x.bottom=ie,x.top=te):(x.top=de,x.bottom=te)}var A={};return H&&(H.includes("height")&&Y?A.height=Y:H.includes("minHeight")&&Y&&(A.minHeight=Y),H.includes("width")&&M?A.width=M:H.includes("minWidth")&&M&&(A.minWidth=M)),d||(A.pointerEvents="none"),t.createElement(B,{open:L||ue,getContainer:y&&function(){return y(v)},autoDestroy:u},t.createElement(Ja,{prefixCls:i,open:d,zIndex:q,mask:D,motion:E}),t.createElement(La,{onResize:me,disabled:!d},function(Je){return t.createElement(ka,Pa({motionAppear:!0,motionEnter:!0,motionLeave:!0,removeOnLeave:!1,forceRender:L,leavedClassName:"".concat(i,"-hidden")},T,{onAppearPrepare:W,onEnterPrepare:W,visible:d,onVisibleChanged:function(J){var ye;T==null||(ye=T.onVisibleChanged)===null||ye===void 0||ye.call(T,J),c(J)}}),function(be,J){var ye=be.className,w=be.style,Re=rr(i,ye,n);return t.createElement("div",{ref:Ba(Je,a,J),className:Re,style:V(V(V(V({"--arrow-x":"".concat(m.x||0,"px"),"--arrow-y":"".concat(m.y||0,"px")},x),A),w),{},{boxSizing:"border-box",zIndex:q},l),onMouseEnter:j,onMouseLeave:I,onPointerEnter:re,onClick:g},f&&t.createElement(ja,{prefixCls:i,arrow:f,arrowPos:m,align:S}),t.createElement(Ga,{cache:!d&&!P},k))})}))}),Za=t.forwardRef(function(e,a){var r=e.children,n=e.getTriggerDOMNode,i=Da(r),l=t.useCallback(function(c){Ha(a,n?n(c):c)},[n]),v=Ta(l,r.ref);return i?t.cloneElement(r,{ref:v}):r}),ga=t.createContext(null);function ya(e){return e?Array.isArray(e)?e:[e]:[]}function Ia(e,a,r,n){return t.useMemo(function(){var i=ya(r??a),l=ya(n??a),v=new Set(i),c=new Set(l);return e&&(v.has("hover")&&(v.delete("hover"),v.add("click")),c.has("hover")&&(c.delete("hover"),c.add("click"))),[v,c]},[e,a,r,n])}function Ya(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],r=arguments.length>2?arguments[2]:void 0;return r?e[0]===a[0]:e[0]===a[0]&&e[1]===a[1]}function Xa(e,a,r,n){for(var i=r.points,l=Object.keys(e),v=0;v<l.length;v+=1){var c,d=l[v];if(Ya((c=e[d])===null||c===void 0?void 0:c.points,i,n))return"".concat(a,"-placement-").concat(d)}return""}function Ca(e,a,r,n){return a||(r?{motionName:"".concat(e,"-").concat(r)}:n?{motionName:n}:null)}function mr(e){return e.ownerDocument.defaultView}function la(e){for(var a=[],r=e==null?void 0:e.parentElement,n=["hidden","scroll","clip","auto"];r;){var i=mr(r).getComputedStyle(r),l=i.overflowX,v=i.overflowY,c=i.overflow;[l,v,c].some(function(d){return n.includes(d)})&&a.push(r),r=r.parentElement}return a}function hr(e){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;return Number.isNaN(e)?a:e}function dr(e){return hr(parseFloat(e),0)}function Ma(e,a){var r=V({},e);return(a||[]).forEach(function(n){if(!(n instanceof HTMLBodyElement||n instanceof HTMLHtmlElement)){var i=mr(n).getComputedStyle(n),l=i.overflow,v=i.overflowClipMargin,c=i.borderTopWidth,d=i.borderBottomWidth,h=i.borderLeftWidth,P=i.borderRightWidth,g=n.getBoundingClientRect(),D=n.offsetHeight,f=n.clientHeight,m=n.offsetWidth,S=n.clientWidth,T=dr(c),E=dr(d),L=dr(h),y=dr(P),u=hr(Math.round(g.width/m*1e3)/1e3),B=hr(Math.round(g.height/D*1e3)/1e3),q=(m-S-L-y)*u,j=(D-f-T-E)*B,I=T*B,re=E*B,_=L*u,U=y*u,de=0,he=0;if(l==="clip"){var ie=dr(v);de=ie*u,he=ie*B}var me=g.x+_-de,W=g.y+I-he,H=me+g.width+2*de-_-U-q,M=W+g.height+2*he-I-re-j;r.left=Math.max(r.left,me),r.top=Math.max(r.top,W),r.right=Math.min(r.right,H),r.bottom=Math.min(r.bottom,M)}}),r}function wa(e){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r="".concat(a),n=r.match(/^(.*)\%$/);return n?e*(parseFloat(n[1])/100):parseFloat(r)}function Sa(e,a){var r=a||[],n=b(r,2),i=n[0],l=n[1];return[wa(e.width,i),wa(e.height,l)]}function ba(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";return[e[0],e[1]]}function er(e,a){var r=a[0],n=a[1],i,l;return r==="t"?l=e.y:r==="b"?l=e.y+e.height:l=e.y+e.height/2,n==="l"?i=e.x:n==="r"?i=e.x+e.width:i=e.x+e.width/2,{x:i,y:l}}function Ne(e,a){var r={t:"b",b:"t",l:"r",r:"l"};return e.map(function(n,i){return i===a?r[n]||"c":n}).join("")}function Oa(e,a,r,n,i,l,v){var c=t.useState({ready:!1,offsetX:0,offsetY:0,offsetR:0,offsetB:0,arrowX:0,arrowY:0,scaleX:1,scaleY:1,align:i[n]||{}}),d=b(c,2),h=d[0],P=d[1],g=t.useRef(0),D=t.useMemo(function(){return a?la(a):[]},[a]),f=t.useRef({}),m=function(){f.current={}};e||m();var S=Ve(function(){if(a&&r&&e){let ee=function(Se,Ue){var Oe=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Re,pe=k.x+Se,cr=k.y+Ue,fr=pe+X,Hr=cr+x,ea=Math.max(pe,Oe.left),ra=Math.max(cr,Oe.top),aa=Math.min(fr,Oe.right),ta=Math.min(Hr,Oe.bottom);return Math.max(0,(aa-ea)*(ta-ra))},Br=function(){Te=k.y+C,Le=Te+x,ke=k.x+R,Ze=ke+X};var L,y,u=a,B=u.ownerDocument,q=mr(u),j=q.getComputedStyle(u),I=j.width,re=j.height,_=j.position,U=u.style.left,de=u.style.top,he=u.style.right,ie=u.style.bottom,me=u.style.overflow,W=V(V({},i[n]),l),H=B.createElement("div");(L=u.parentElement)===null||L===void 0||L.appendChild(H),H.style.left="".concat(u.offsetLeft,"px"),H.style.top="".concat(u.offsetTop,"px"),H.style.position=_,H.style.height="".concat(u.offsetHeight,"px"),H.style.width="".concat(u.offsetWidth,"px"),u.style.left="0",u.style.top="0",u.style.right="auto",u.style.bottom="auto",u.style.overflow="hidden";var M;if(Array.isArray(r))M={x:r[0],y:r[1],width:0,height:0};else{var Y=r.getBoundingClientRect();M={x:Y.x,y:Y.y,width:Y.width,height:Y.height}}var k=u.getBoundingClientRect(),ue=B.documentElement,ae=ue.clientWidth,ar=ue.clientHeight,qe=ue.scrollWidth,ge=ue.scrollHeight,Qe=ue.scrollTop,te=ue.scrollLeft,x=k.height,X=k.width,le=M.height,se=M.width,je={left:0,top:0,right:ae,bottom:ar},tr={left:-te,top:-Qe,right:qe-te,bottom:ge-Qe},A=W.htmlRegion,Je="visible",be="visibleFirst";A!=="scroll"&&A!==be&&(A=Je);var J=A===be,ye=Ma(tr,D),w=Ma(je,D),Re=A===Je?w:ye,O=J?w:Re;u.style.left="auto",u.style.top="auto",u.style.right="0",u.style.bottom="0";var gr=u.getBoundingClientRect();u.style.left=U,u.style.top=de,u.style.right=he,u.style.bottom=ie,u.style.overflow=me,(y=u.parentElement)===null||y===void 0||y.removeChild(H);var Ee=hr(Math.round(X/parseFloat(I)*1e3)/1e3),We=hr(Math.round(x/parseFloat(re)*1e3)/1e3);if(Ee===0||We===0||ia(r)&&!xa(r))return;var yr=W.offset,ne=W.targetOffset,Ar=Sa(k,yr),Cr=b(Ar,2),oe=Cr[0],p=Cr[1],ve=Sa(M,ne),Mr=b(ve,2),wr=Mr[0],Ur=Mr[1];M.x-=wr,M.y-=Ur;var Ge=W.points||[],G=b(Ge,2),Pe=G[0],Vr=G[1],Ce=ba(Vr),K=ba(Pe),Sr=er(M,Ce),nr=er(k,K),De=V({},W),R=Sr.x-nr.x+oe,C=Sr.y-nr.y+p,ce=ee(R,C),fe=ee(R,C,w),ze=er(M,["t","l"]),or=er(k,["t","l"]),ir=er(M,["b","r"]),ur=er(k,["b","r"]),Q=W.overflow||{},qr=Q.adjustX,br=Q.adjustY,Ke=Q.shiftX,lr=Q.shiftY,Pr=function(Ue){return typeof Ue=="boolean"?Ue:Ue>=0},Te,Le,ke,Ze;Br();var sr=Pr(br),vr=K[0]===Ce[0];if(sr&&K[0]==="t"&&(Le>O.bottom||f.current.bt)){var Be=C;vr?Be-=x-le:Be=ze.y-ur.y-p;var He=ee(R,Be),Qr=ee(R,Be,w);He>ce||He===ce&&(!J||Qr>=fe)?(f.current.bt=!0,C=Be,p=-p,De.points=[Ne(K,0),Ne(Ce,0)]):f.current.bt=!1}if(sr&&K[0]==="b"&&(Te<O.top||f.current.tb)){var F=C;vr?F+=x-le:F=ir.y-or.y-p;var Dr=ee(R,F),jr=ee(R,F,w);Dr>ce||Dr===ce&&(!J||jr>=fe)?(f.current.tb=!0,C=F,p=-p,De.points=[Ne(K,0),Ne(Ce,0)]):f.current.tb=!1}var Tr=Pr(qr),Lr=K[1]===Ce[1];if(Tr&&K[1]==="l"&&(Ze>O.right||f.current.rl)){var xe=R;Lr?xe-=X-se:xe=ze.x-ur.x-oe;var kr=ee(xe,C),Jr=ee(xe,C,w);kr>ce||kr===ce&&(!J||Jr>=fe)?(f.current.rl=!0,R=xe,oe=-oe,De.points=[Ne(K,1),Ne(Ce,1)]):f.current.rl=!1}if(Tr&&K[1]==="r"&&(ke<O.left||f.current.lr)){var Fe=R;Lr?Fe+=X-se:Fe=ir.x-or.x-oe;var $r=ee(Fe,C),Ie=ee(Fe,C,w);$r>ce||$r===ce&&(!J||Ie>=fe)?(f.current.lr=!0,R=Fe,oe=-oe,De.points=[Ne(K,1),Ne(Ce,1)]):f.current.lr=!1}Br();var Me=Ke===!0?0:Ke;typeof Me=="number"&&(ke<w.left&&(R-=ke-w.left-oe,M.x+se<w.left+Me&&(R+=M.x-w.left+se-Me)),Ze>w.right&&(R-=Ze-w.right-oe,M.x>w.right-Me&&(R+=M.x-w.right+Me)));var _e=lr===!0?0:lr;typeof _e=="number"&&(Te<w.top&&(C-=Te-w.top-p,M.y+le<w.top+_e&&(C+=M.y-w.top+le-_e)),Le>w.bottom&&(C-=Le-w.bottom-p,M.y>w.bottom-_e&&(C+=M.y-w.bottom+_e)));var Ye=k.x+R,Xe=Ye+X,we=k.y+C,Nr=we+x,Ae=M.x,$e=Ae+se,Rr=M.y,Gr=Rr+le,Kr=Math.max(Ye,Ae),Er=Math.min(Xe,$e),Zr=(Kr+Er)/2,Ir=Zr-Ye,Yr=Math.max(we,Rr),Wr=Math.min(Nr,Gr),Xr=(Yr+Wr)/2,Or=Xr-we;v==null||v(a,De);var zr=gr.right-k.x-(R+k.width),pr=gr.bottom-k.y-(C+k.height);P({ready:!0,offsetX:R/Ee,offsetY:C/We,offsetR:zr/Ee,offsetB:pr/We,arrowX:Ir/Ee,arrowY:Or/We,scaleX:Ee,scaleY:We,align:De})}}),T=function(){g.current+=1;var y=g.current;Promise.resolve().then(function(){g.current===y&&S()})},E=function(){P(function(y){return V(V({},y),{},{ready:!1})})};return Z(E,[n]),Z(function(){e||E()},[e]),[h.ready,h.offsetX,h.offsetY,h.offsetR,h.offsetB,h.arrowX,h.arrowY,h.scaleX,h.scaleY,h.align,T]}function pa(e,a,r,n,i){Z(function(){if(e&&a&&r){let g=function(){n(),i()};var l=a,v=r,c=la(l),d=la(v),h=mr(v),P=new Set([h].concat(oa(c),oa(d)));return P.forEach(function(D){D.addEventListener("scroll",g,{passive:!0})}),h.addEventListener("resize",g,{passive:!0}),n(),function(){P.forEach(function(D){D.removeEventListener("scroll",g),h.removeEventListener("resize",g)})}}},[e,a,r])}function et(e,a,r,n,i,l,v,c){var d=t.useRef(e),h=t.useRef(!1);d.current!==e&&(h.current=!0,d.current=e),t.useEffect(function(){var P=ca(function(){h.current=!1});return function(){ca.cancel(P)}},[e]),t.useEffect(function(){if(a&&n&&(!i||l)){var P=function(){var q=!1,j=function(_){var U=_.target;q=v(U)},I=function(_){var U=_.target;!h.current&&d.current&&!q&&!v(U)&&c(!1)};return[j,I]},g=P(),D=b(g,2),f=D[0],m=D[1],S=P(),T=b(S,2),E=T[0],L=T[1],y=mr(n);y.addEventListener("mousedown",f,!0),y.addEventListener("click",m,!0),y.addEventListener("contextmenu",m,!0);var u=ua(r);return u&&(u.addEventListener("mousedown",E,!0),u.addEventListener("click",L,!0),u.addEventListener("contextmenu",L,!0)),function(){y.removeEventListener("mousedown",f,!0),y.removeEventListener("click",m,!0),y.removeEventListener("contextmenu",m,!0),u&&(u.removeEventListener("mousedown",E,!0),u.removeEventListener("click",L,!0),u.removeEventListener("contextmenu",L,!0))}}},[a,r,n,i,l])}var rt=["prefixCls","children","action","showAction","hideAction","popupVisible","defaultPopupVisible","onPopupVisibleChange","afterPopupVisibleChange","mouseEnterDelay","mouseLeaveDelay","focusDelay","blurDelay","mask","maskClosable","getPopupContainer","forceRender","autoDestroy","destroyPopupOnHide","popup","popupClassName","popupStyle","popupPlacement","builtinPlacements","popupAlign","zIndex","stretch","getPopupClassNameFromAlign","fresh","alignPoint","onPopupClick","onPopupAlign","arrow","popupMotion","maskMotion","popupTransitionName","popupAnimation","maskTransitionName","maskAnimation","className","getTriggerDOMNode"];function at(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Na,a=t.forwardRef(function(r,n){var i=r.prefixCls,l=i===void 0?"rc-trigger-popup":i,v=r.children,c=r.action,d=c===void 0?"hover":c,h=r.showAction,P=r.hideAction,g=r.popupVisible,D=r.defaultPopupVisible,f=r.onPopupVisibleChange,m=r.afterPopupVisibleChange,S=r.mouseEnterDelay,T=r.mouseLeaveDelay,E=T===void 0?.1:T,L=r.focusDelay,y=r.blurDelay,u=r.mask,B=r.maskClosable,q=B===void 0?!0:B,j=r.getPopupContainer,I=r.forceRender,re=r.autoDestroy,_=r.destroyPopupOnHide,U=r.popup,de=r.popupClassName,he=r.popupStyle,ie=r.popupPlacement,me=r.builtinPlacements,W=me===void 0?{}:me,H=r.popupAlign,M=r.zIndex,Y=r.stretch,k=r.getPopupClassNameFromAlign,ue=r.fresh,ae=r.alignPoint,ar=r.onPopupClick,qe=r.onPopupAlign,ge=r.arrow,Qe=r.popupMotion,te=r.maskMotion,x=r.popupTransitionName,X=r.popupAnimation,le=r.maskTransitionName,se=r.maskAnimation,je=r.className,tr=r.getTriggerDOMNode,A=Ra(r,rt),Je=re||_||!1,be=t.useState(!1),J=b(be,2),ye=J[0],w=J[1];Z(function(){w(Fa())},[]);var Re=t.useRef({}),O=t.useContext(ga),gr=t.useMemo(function(){return{registerSubPopup:function(s,$){Re.current[s]=$,O==null||O.registerSubPopup(s,$)}}},[O]),Ee=_a(),We=t.useState(null),yr=b(We,2),ne=yr[0],Ar=yr[1],Cr=Ve(function(o){ia(o)&&ne!==o&&Ar(o),O==null||O.registerSubPopup(Ee,o)}),oe=t.useState(null),p=b(oe,2),ve=p[0],Mr=p[1],wr=t.useRef(null),Ur=Ve(function(o){ia(o)&&ve!==o&&(Mr(o),wr.current=o)}),Ge=t.Children.only(v),G=(Ge==null?void 0:Ge.props)||{},Pe={},Vr=Ve(function(o){var s,$,z=ve;return(z==null?void 0:z.contains(o))||((s=ua(z))===null||s===void 0?void 0:s.host)===o||o===z||(ne==null?void 0:ne.contains(o))||(($=ua(ne))===null||$===void 0?void 0:$.host)===o||o===ne||Object.values(Re.current).some(function(N){return(N==null?void 0:N.contains(o))||o===N})}),Ce=Ca(l,Qe,X,x),K=Ca(l,te,se,le),Sr=t.useState(D||!1),nr=b(Sr,2),De=nr[0],R=nr[1],C=g??De,ce=Ve(function(o){g===void 0&&R(o)});Z(function(){R(g||!1)},[g]);var fe=t.useRef(C);fe.current=C;var ze=t.useRef([]);ze.current=[];var or=Ve(function(o){var s;ce(o),((s=ze.current[ze.current.length-1])!==null&&s!==void 0?s:C)!==o&&(ze.current.push(o),f==null||f(o))}),ir=t.useRef(),ur=function(){clearTimeout(ir.current)},Q=function(s){var $=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;ur(),$===0?or(s):ir.current=setTimeout(function(){or(s)},$*1e3)};t.useEffect(function(){return ur},[]);var qr=t.useState(!1),br=b(qr,2),Ke=br[0],lr=br[1];Z(function(o){(!o||C)&&lr(!0)},[C]);var Pr=t.useState(null),Te=b(Pr,2),Le=Te[0],ke=Te[1],Ze=t.useState([0,0]),sr=b(Ze,2),vr=sr[0],Be=sr[1],He=function(s){Be([s.clientX,s.clientY])},Qr=Oa(C,ne,ae?vr:ve,ie,W,H,qe),F=b(Qr,11),Dr=F[0],jr=F[1],Tr=F[2],Lr=F[3],xe=F[4],kr=F[5],Jr=F[6],Fe=F[7],$r=F[8],Ie=F[9],Me=F[10],_e=Ia(ye,d,h,P),Ye=b(_e,2),Xe=Ye[0],we=Ye[1],Nr=Xe.has("click"),Ae=we.has("click")||we.has("contextMenu"),$e=Ve(function(){Ke||Me()}),Rr=function(){fe.current&&ae&&Ae&&Q(!1)};pa(C,ve,ne,$e,Rr),Z(function(){$e()},[vr,ie]),Z(function(){C&&!(W!=null&&W[ie])&&$e()},[JSON.stringify(H)]);var Gr=t.useMemo(function(){var o=Xa(W,l,Ie,ae);return rr(o,k==null?void 0:k(Ie))},[Ie,k,W,l,ae]);t.useImperativeHandle(n,function(){return{nativeElement:wr.current,forceAlign:$e}});var Kr=t.useState(0),Er=b(Kr,2),Zr=Er[0],Ir=Er[1],Yr=t.useState(0),Wr=b(Yr,2),Xr=Wr[0],Or=Wr[1],zr=function(){if(Y&&ve){var s=ve.getBoundingClientRect();Ir(s.width),Or(s.height)}},pr=function(){zr(),$e()},ee=function(s){lr(!1),Me(),m==null||m(s)},Br=function(){return new Promise(function(s){zr(),ke(function(){return s})})};Z(function(){Le&&(Me(),Le(),ke(null))},[Le]);function Se(o,s,$,z){Pe[o]=function(N){var xr;z==null||z(N),Q(s,$);for(var na=arguments.length,sa=new Array(na>1?na-1:0),Fr=1;Fr<na;Fr++)sa[Fr-1]=arguments[Fr];(xr=G[o])===null||xr===void 0||xr.call.apply(xr,[G,N].concat(sa))}}(Nr||Ae)&&(Pe.onClick=function(o){var s;fe.current&&Ae?Q(!1):!fe.current&&Nr&&(He(o),Q(!0));for(var $=arguments.length,z=new Array($>1?$-1:0),N=1;N<$;N++)z[N-1]=arguments[N];(s=G.onClick)===null||s===void 0||s.call.apply(s,[G,o].concat(z))}),et(C,Ae,ve,ne,u,q,Vr,Q);var Ue=Xe.has("hover"),Oe=we.has("hover"),pe,cr;Ue&&(Se("onMouseEnter",!0,S,function(o){He(o)}),Se("onPointerEnter",!0,S,function(o){He(o)}),pe=function(){(C||Ke)&&Q(!0,S)},ae&&(Pe.onMouseMove=function(o){var s;(s=G.onMouseMove)===null||s===void 0||s.call(G,o)})),Oe&&(Se("onMouseLeave",!1,E),Se("onPointerLeave",!1,E),cr=function(){Q(!1,E)}),Xe.has("focus")&&Se("onFocus",!0,L),we.has("focus")&&Se("onBlur",!1,y),Xe.has("contextMenu")&&(Pe.onContextMenu=function(o){var s;fe.current&&we.has("contextMenu")?Q(!1):(He(o),Q(!0)),o.preventDefault();for(var $=arguments.length,z=new Array($>1?$-1:0),N=1;N<$;N++)z[N-1]=arguments[N];(s=G.onContextMenu)===null||s===void 0||s.call.apply(s,[G,o].concat(z))}),je&&(Pe.className=rr(G.className,je));var fr=V(V({},G),Pe),Hr={},ea=["onContextMenu","onClick","onMouseDown","onTouchStart","onMouseEnter","onMouseLeave","onFocus","onBlur"];ea.forEach(function(o){A[o]&&(Hr[o]=function(){for(var s,$=arguments.length,z=new Array($),N=0;N<$;N++)z[N]=arguments[N];(s=fr[o])===null||s===void 0||s.call.apply(s,[fr].concat(z)),A[o].apply(A,z)})});var ra=t.cloneElement(Ge,V(V({},fr),Hr)),aa={x:kr,y:Jr},ta=ge?V({},ge!==!0?ge:{}):null;return t.createElement(t.Fragment,null,t.createElement(La,{disabled:!C,ref:Ur,onResize:pr},t.createElement(Za,{getTriggerDOMNode:tr},ra)),t.createElement(ga.Provider,{value:gr},t.createElement(Ka,{portal:e,ref:Cr,prefixCls:l,popup:U,className:rr(de,Gr),style:he,target:ve,onMouseEnter:pe,onMouseLeave:cr,onPointerEnter:pe,zIndex:M,open:C,keepDom:Ke,fresh:ue,onClick:ar,mask:u,motion:Ce,maskMotion:K,onVisibleChanged:ee,onPrepare:Br,forceRender:I,autoDestroy:Je,getPopupContainer:j,align:Ie,arrow:ta,arrowPos:aa,ready:Dr,offsetX:jr,offsetY:Tr,offsetR:Lr,offsetB:xe,onAlign:$e,stretch:Y,targetWidth:Zr/Fe,targetHeight:Xr/$r})))});return a}const ct=at(Na);export{Na as P,ct as T};
