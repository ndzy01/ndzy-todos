import{r as u}from"./react-Tf5a63N3.js";import{i as G}from"./lodash-o2jpNBUl.js";import"./dayjs-I44_pL56.js";import{_ as w,a as F}from"./tslib-9i2l26Ba.js";import{i as J}from"./resize-observer-polyfill-B32NGzNS.js";var K=function(e){return function(t,r){var a=u.useRef(!1);e(function(){return function(){a.current=!1}},[]),e(function(){if(!a.current)a.current=!0;else return t()},r)}},A=function(e){return typeof e=="function"},T=function(e){return typeof e=="number"};function P(e){var t=u.useRef(e);t.current=u.useMemo(function(){return e},[e]);var r=u.useRef();return r.current||(r.current=function(){for(var a=[],n=0;n<arguments.length;n++)a[n]=arguments[n];return t.current.apply(this,a)}),r.current}const Q=K(u.useEffect);function H(e,t){if(e===t)return!0;for(var r=0;r<e.length;r++)if(!Object.is(e[r],t[r]))return!1;return!0}function b(e){var t=u.useRef(e);return t.current=e,t}var x=function(e){var t=b(e);u.useEffect(function(){return function(){t.current()}},[])},z=!!(typeof window<"u"&&window.document&&window.document.createElement),oe=function(e){u.useEffect(function(){e==null||e()},[])};function E(e,t){if(z){if(!e)return t;var r;return A(e)?r=e():"current"in e?r=e.current:r=e,r}}var C=function(e){var t=function(r,a,n){var o=u.useRef(!1),v=u.useRef([]),i=u.useRef([]),c=u.useRef();e(function(){var d,R=Array.isArray(n)?n:[n],p=R.map(function(S){return E(S)});if(!o.current){o.current=!0,v.current=p,i.current=a,c.current=r();return}(p.length!==v.current.length||!H(p,v.current)||!H(a,i.current))&&((d=c.current)===null||d===void 0||d.call(c),v.current=p,i.current=a,c.current=r())}),x(function(){var d;(d=c.current)===null||d===void 0||d.call(c),o.current=!1})};return t},X=C(u.useEffect);const O=X;var Y=function(e,t){return e===void 0&&(e=[]),t===void 0&&(t=[]),G(e,t)},Z=function(e){return function(t,r){var a=u.useRef(),n=u.useRef(0);(r===void 0||!Y(r,a.current))&&(a.current=r,n.current+=1),e(t,[n.current])}};const ve=Z(u.useEffect);function D(e,t,r){r===void 0&&(r={});var a=b(t);O(function(){var n=E(r.target,window);if(n!=null&&n.addEventListener){var o=function(v){return a.current(v)};return n.addEventListener(e,o,{capture:r.capture,once:r.once,passive:r.passive}),function(){n.removeEventListener(e,o,{capture:r.capture})}}},[e,r.capture,r.once,r.passive],r.target)}function N(e){var t=u.useRef(0),r=w(u.useState(e),2),a=r[0],n=r[1],o=u.useCallback(function(v){cancelAnimationFrame(t.current),t.current=requestAnimationFrame(function(){n(v)})},[]);return x(function(){cancelAnimationFrame(t.current)}),[a,o]}var se=function(e){var t=w(u.useState(e),2),r=t[0],a=t[1],n=u.useCallback(function(o){a(function(v){var i=A(o)?o(v):o;return i?F(F({},v),i):v})},[]);return[r,n]},ee=C(u.useLayoutEffect),re=z?ee:O;function te(e){var t=w(N(function(){var n=E(e);return n?{width:n.clientWidth,height:n.clientHeight}:void 0}),2),r=t[0],a=t[1];return re(function(){var n=E(e);if(n){var o=new J(function(v){v.forEach(function(i){var c=i.target,d=c.clientWidth,R=c.clientHeight;a({width:d,height:R})})});return o.observe(n),function(){o.disconnect()}}},[],e),r}var ne=function(e,t){var r=t.containerTarget,a=t.wrapperTarget,n=t.itemHeight,o=t.overscan,v=o===void 0?5:o,i=b(n),c=te(r),d=u.useRef(!1),R=w(u.useState([]),2),p=R[0],S=R[1],_=w(u.useState({}),2),L=_[0],k=_[1],q=function(f,s){if(T(i.current))return Math.ceil(f/i.current);for(var h=0,l=0,g=s;g<e.length;g++){var m=i.current(g,e[g]);if(h+=m,l=g,h>=f)break}return l-s},U=function(f){if(T(i.current))return Math.floor(f/i.current)+1;for(var s=0,h=0,l=0;l<e.length;l++){var g=i.current(l,e[l]);if(s+=g,s>=f){h=l;break}}return h+1},M=function(f){if(T(i.current)){var s=f*i.current;return s}var h=e.slice(0,f).reduce(function(l,g,m){return l+i.current(m,e[m])},0);return h},V=u.useMemo(function(){return T(i.current)?e.length*i.current:e.reduce(function(f,s,h){return f+i.current(h,e[h])},0)},[e]),y=function(){var f=E(r);if(f){var s=f.scrollTop,h=f.clientHeight,l=U(s),g=q(h,l),m=Math.max(0,l-v),j=Math.min(e.length,l+g+v),W=M(m);k({height:V-W+"px",marginTop:W+"px"}),S(e.slice(m,j).map(function(B,I){return{data:B,index:I+m}}))}};Q(function(){var f=E(a);f&&Object.keys(L).forEach(function(s){return f.style[s]=L[s]})},[L]),u.useEffect(function(){!(c!=null&&c.width)||!(c!=null&&c.height)||y()},[c==null?void 0:c.width,c==null?void 0:c.height,e]),D("scroll",function(f){if(d.current){d.current=!1;return}f.preventDefault(),y()},{target:r});var $=function(f){var s=E(r);s&&(d.current=!0,s.scrollTop=M(f),y())};return[p,P($)]};const le=ne;export{se as a,oe as b,ve as c,le as u};
