import{r as c,j as e,a as oe}from"./react-10p77hjm.js";import{c as re}from"./react-dom-4B3MfQw0.js";import{L as ne,B as le}from"./react-router-dom-Tq0p25IC.js";import{s as g,F as m,I as E,D as ie,S as P,A as de,B as h,a as I,P as _,b as ce,c as $,d as me,e as pe,T as ue,C as he,z as xe}from"./antd-QEmqI608.js";import{d as A}from"./dayjs-MKOyeQCS.js";import{a as ge}from"./axios-G2rPRu76.js";import{C as f}from"./crypto-js-k0BGDXaE.js";import{a as ye,O as fe,d as je,e as N}from"./react-router-6r0JAuF-.js";import{Z as Ae,m as Te,c as Se,u as De}from"./@wangeditor-1YrI4vGj.js";import{u as z,a as Ee,b as J}from"./ahooks-fUlzLwHJ.js";import"./@babel-W7-Wn9hY.js";import"./scheduler-iwWdm5Ml.js";import"./@remix-run-1q7uUoWE.js";import"./@ant-design-7BBu72E8.js";import"./rc-util-ZPCrP7KH.js";import"./react-is-q81m-9gd.js";import"./@emotion-folQEnri.js";import"./stylis-3miXmfPm.js";import"./classnames-feG2F_pn.js";import"./resize-observer-polyfill-B32NGzNS.js";import"./@ctrl-_Y40OLZn.js";import"./rc-resize-observer-Mq987d7x.js";import"./rc-motion-HJD7aCph.js";import"./rc-picker-X-82nnsk.js";import"./@rc-component-bEyLh7rs.js";import"./rc-menu-M5DiBGSS.js";import"./rc-overflow-864IGxGw.js";import"./rc-select-BeV5qxnx.js";import"./rc-virtual-list-G-esyE_c.js";import"./rc-drawer-bsTRI2xP.js";import"./rc-field-form-EhrfISiG.js";import"./async-validator-BHjhHa7C.js";import"./rc-notification-nMoV03oR.js";import"./rc-tooltip-CS44jBqu.js";import"./rc-table-lpCmKfD0.js";import"./rc-tree-So3-8vBO.js";import"./rc-checkbox-VIaa6dE_.js";import"./rc-pagination-TsQPsCox.js";import"./rc-dropdown-PhM_qb0B.js";import"./throttle-debounce-5p4B7Tol.js";import"./rc-input-UlaQUxya.js";import"./rc-textarea-qAMnS_qc.js";import"./tslib-9i2l26Ba.js";(function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))n(o);new MutationObserver(o=>{for(const l of o)if(l.type==="childList")for(const i of l.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&n(i)}).observe(document,{childList:!0,subtree:!0});function s(o){const l={};return o.integrity&&(l.integrity=o.integrity),o.referrerPolicy&&(l.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?l.credentials="include":o.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function n(o){if(o.ep)return;o.ep=!0;const l=s(o);fetch(o.href,l)}})();const K={loading:!1,list:[],tags:[]},Ie=(t,a)=>{switch(a.type){case"UPDATE":return{...t,...a.payload||{}};default:return t}},S=c.createContext({state:K,dispatch:()=>{}});g.config({top:100,duration:3,maxCount:1});if(!localStorage.getItem("DATA")){const t={todoList:[]};localStorage.setItem("DATA",JSON.stringify(t))}localStorage.getItem("USE_LOCAL_DATA")||localStorage.setItem("USE_LOCAL_DATA","0");localStorage.getItem("USE_LOCAL_SERVICE")||localStorage.setItem("USE_LOCAL_SERVICE","0");localStorage.getItem("BASE_URL")||localStorage.setItem("BASE_URL","http://localhost:3000");const F=localStorage.getItem("BASE_URL"),be=(localStorage.getItem("USE_LOCAL_SERVICE")||"0")==="0",Ce=be&&F?F:"https://ndzy-server.vercel.app",y=ge.create({baseURL:Ce,timeout:6e4,withCredentials:!1});y.interceptors.request.use(t=>{const a=localStorage.getItem("token");return a&&(t.headers={Authorization:"Basic "+a}),t},t=>{Promise.reject(t)});y.interceptors.response.use(t=>{const a=t.data;return t.data.status===1&&g.error(t.data.msg),t.data.status===0&&g.success(t.data.msg),t.data.status===2&&localStorage.setItem("token",""),a},t=>{let a="";if(t&&t.response)switch(t.response.status){case 302:a="接口重定向了！",g.error(a);break;case 400:a="参数不正确！",g.error(a);break;case 401:break;case 403:a="您没有权限操作！",g.error(a);break;case 404:a=`请求地址出错: ${t.response.config.url}`,g.error(a);break;case 408:a="请求超时！",g.error(a);break;case 409:a="系统已存在相同数据！",g.error(a);break;case 500:a="服务器内部错误！",g.error(a);break;case 501:a="服务未实现！",g.error(a);break;case 502:a="网关错误！",g.error(a);break;case 503:a="服务不可用！",g.error(a);break;case 504:a="服务暂时无法访问，请稍后再试！",g.error(a);break;case 505:a="HTTP 版本不受支持！",g.error(a);break;default:a="异常问题，请联系管理员！",g.error(a);break}return Promise.reject(a)});const we=t=>t&&t<A().endOf("day"),O=()=>{let t=new Date().getTime();return typeof performance<"u"&&typeof performance.now=="function"&&(t+=performance.now()),"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,s=>{const n=(t+Math.random()*16)%16|0;return t=Math.floor(t/16),(s=="x"?n:n&3|8).toString(16)})},V=()=>{let t="";for(let a=0;a<8;a++)t+=O().replace(/-/g,"");return t},H=(t,a,s)=>{const n=f.enc.Utf8.parse(a),o=f.enc.Utf8.parse(s),l=f.enc.Hex.parse(t),i=f.enc.Base64.stringify(l);return f.AES.decrypt(i,n,{iv:o,mode:f.mode.CBC,padding:f.pad.Pkcs7,hasher:f.algo.SHA256}).toString(f.enc.Utf8).toString()},q=t=>{const a=V(),s=V(),n=f.enc.Utf8.parse(a),o=f.enc.Utf8.parse(s),l=f.enc.Utf8.parse(t),i=f.AES.encrypt(l,n,{iv:o,mode:f.mode.CBC,padding:f.pad.Pkcs7,hasher:f.algo.SHA256});return{keyBase:a,ivBase:s,text:i.ciphertext.toString().toUpperCase()}},M={labelCol:{xs:{span:6},sm:{span:6}},wrapperCol:{xs:{span:18},sm:{span:18}}},R={wrapperCol:{span:14,offset:2}},C=()=>{const t=(localStorage.getItem("USE_LOCAL_DATA")||"0")==="0",a=ye(),{dispatch:s}=c.useContext(S),[n,o]=c.useState(""),[l,i]=c.useState([]),x=(r,d={})=>{a(r,{...d})},u=()=>{s({type:"UPDATE",payload:{loading:!0}}),y.get("/users/loginInfo").then(r=>{s({type:"UPDATE",payload:{user:r.data[0],loading:!1}})}).catch(()=>{s({type:"UPDATE",payload:{loading:!1}})})},b=()=>{s({type:"UPDATE",payload:{loading:!0}}),y("/tags").then(r=>{s({type:"UPDATE",payload:{tags:r.data,loading:!1}})}).catch(()=>{s({type:"UPDATE",payload:{loading:!1}})})},T=(r={})=>{if(s({type:"UPDATE",payload:{loading:!0}}),t){const d=JSON.parse(localStorage.getItem("DATA"));s({type:"UPDATE",payload:{list:d.todoList.map(p=>({...p,detail:H(p.detail,p.keyBase,p.ivBase)})),loading:!1}})}else y.get("/todos",{params:{...r}}).then(d=>{s({type:"UPDATE",payload:{list:d.data.map(p=>({...p,detail:H(p.detail,p.keyBase,p.ivBase)})),loading:!1}})}).catch(()=>{s({type:"UPDATE",payload:{loading:!1}})})},j=(r,d)=>{s({type:"UPDATE",payload:{loading:!0}});const{text:p,keyBase:U,ivBase:L}=q(r.detail);if(t){const w=JSON.parse(localStorage.getItem("DATA"));w.todoList.push({id:O(),...r,deadline:A(r.deadline).format("YYYY-MM-DD"),operationSource:"h5",detail:p,keyBase:U,ivBase:L,isLocal:!0}),localStorage.setItem("DATA",JSON.stringify(w)),s({type:"UPDATE",payload:{list:w.todoList,loading:!1}}),T(),d&&d()}else y.post("/todos",{...r,deadline:A(r.deadline).format("YYYY-MM-DD"),operationSource:"h5",detail:p,keyBase:U,ivBase:L}).then(()=>{s({type:"UPDATE",payload:{loading:!1}}),T(),d&&d()}).catch(()=>{s({type:"UPDATE",payload:{loading:!1}})})},W=(r,d,p)=>{s({type:"UPDATE",payload:{loading:!0}});const{text:U,keyBase:L,ivBase:w}=q(r.detail);if(t){const k=JSON.parse(localStorage.getItem("DATA"));k.todoList=k.todoList.map(v=>v.id===d.id?{...v,name:r.name,detail:U,keyBase:L,ivBase:w,deadline:A(r.deadline).format("YYYY-MM-DD"),tagId:r.tagId}:v),localStorage.setItem("DATA",JSON.stringify(k)),s({type:"UPDATE",payload:{list:k.todoList,loading:!1}}),T(),p&&p()}else y.patch(`/todos/${d.id}`,{name:r.name,detail:U,keyBase:L,ivBase:w,deadline:A(r.deadline).format("YYYY-MM-DD"),tagId:r.tagId}).then(()=>{s({type:"UPDATE",payload:{loading:!1}}),T(),p&&p()}).catch(()=>{s({type:"UPDATE",payload:{loading:!1}})})},Z=r=>{s({type:"UPDATE",payload:{loading:!0}}),y.patch(`/todos/${r.id}`,{isFinish:!0}).then(()=>{T()}).catch(()=>{s({type:"UPDATE",payload:{loading:!1}})})},G=r=>{s({type:"UPDATE",payload:{loading:!0}}),y.delete(`/todos/${r.id}`).then(()=>{T()}).catch(()=>{s({type:"UPDATE",payload:{loading:!1}})})},Q=r=>{s({type:"UPDATE",payload:{loading:!0}}),y.patch(`/todos/${r.id}`,{isFinish:!1}).then(()=>{T()}).catch(()=>{s({type:"UPDATE",payload:{loading:!1}})})},X=()=>{localStorage.setItem("token",""),x("/ndzy-todos/"),window.location.reload()},ee=r=>{s({type:"UPDATE",payload:{loading:!0}}),y.post("/users/login",{...r}).then(d=>{s({type:"UPDATE",payload:{loading:!1}}),d&&d.data&&d.data.token&&(localStorage.setItem("token",d.data.token),x("/ndzy-todos/"),window.location.reload())}).catch(()=>{s({type:"UPDATE",payload:{loading:!1}})})},te=(r,d)=>{s({type:"UPDATE",payload:{loading:!0}}),y.post("/users/register",{...r}).then(p=>{s({type:"UPDATE",payload:{loading:!1}}),p.status===0&&d&&d()}).catch(()=>{s({type:"UPDATE",payload:{loading:!1}})})},ae=r=>{s({type:"UPDATE",payload:{loading:!0}}),y.delete(`/tags/${r}`).then(()=>{b()}).catch(()=>{s({type:"UPDATE",payload:{loading:!1}})})},se=()=>{n&&(s({type:"UPDATE",payload:{loading:!0}}),y.post("/tags",{name:n}).then(()=>{o(""),b()}).catch(()=>{s({type:"UPDATE",payload:{loading:!1}})}))},B=async()=>{s({type:"UPDATE",payload:{loading:!0}}),u(),y.get("/users").then(r=>{s({type:"UPDATE",payload:{loading:!1}}),i(r.data)}).catch(()=>{s({type:"UPDATE",payload:{loading:!1}})})};return{inputValue:n,users:l,initUser:u,initTags:b,createTodo:j,editTodo:W,goPage:x,getAllTodo:T,finishTodo:Z,delTodo:G,recoverTodo:Q,signOut:X,login:ee,register:te,delTag:ae,handleCreateTag:se,setInputValue:o,getUsers:B,delUser:r=>{s({type:"UPDATE",payload:{loading:!0}}),y.delete(`/users/${r.id}`).then(()=>{B()}).catch(()=>{s({type:"UPDATE",payload:{loading:!1}})})},isLocal:t,switchData:()=>{localStorage.getItem("USE_LOCAL_DATA")==="0"?localStorage.setItem("USE_LOCAL_DATA","1"):localStorage.setItem("USE_LOCAL_DATA","0"),window.location.reload()},switchService:()=>{localStorage.getItem("USE_LOCAL_SERVICE")==="0"?localStorage.setItem("USE_LOCAL_SERVICE","1"):localStorage.setItem("USE_LOCAL_SERVICE","0"),window.location.reload()},delLocalData:r=>{const d=JSON.parse(localStorage.getItem("DATA"));d.todoList=d.todoList.filter(p=>p.id!==r),localStorage.setItem("DATA",JSON.stringify(d)),s({type:"UPDATE",payload:{list:d.todoList,loading:!1}}),T()}}};Ae.registerModule(Te);function Ue({value:t,onChange:a}){const[s,n]=c.useState(null),[o,l]=c.useState("");c.useEffect(()=>{l(t)},[t]);const i={},x={placeholder:"请输入内容..."};return c.useEffect(()=>()=>{s!=null&&(s.destroy(),n(null))},[s]),e.jsx(e.Fragment,{children:e.jsxs("div",{style:{border:"1px solid #ccc",zIndex:100},children:[e.jsx(Se,{editor:s,defaultConfig:i,mode:"default",style:{borderBottom:"1px solid #ccc"}}),e.jsx(De,{defaultConfig:x,value:o,onCreated:n,onChange:u=>{l(u.getHtml()),a(u.getHtml())},mode:"default",style:{overflowY:"hidden",minHeight:330}})]})})}const Y=t=>{const{createTodo:a,editTodo:s,isLocal:n}=C(),{state:o}=c.useContext(S),l=i=>t.id?s(i,{id:t.id},t.onClose):a(i,t.onClose);return e.jsxs(m,{initialValues:{name:t.name,deadline:t.deadline?A(t.deadline):A(),detail:t.detail,tagId:t.tagId},preserve:!1,name:"edit",onFinish:l,scrollToFirstError:!0,children:[e.jsx(m.Item,{name:"name",label:"名称",rules:[{required:!0,message:"名称不能为空"}],children:e.jsx(E.TextArea,{rows:1})}),e.jsx(m.Item,{name:"deadline",label:"终止时间",rules:[{required:!0,message:"终止时间不能为空"}],children:e.jsx(ie,{className:"w-100",format:"YYYY-MM-DD",disabledDate:we})}),e.jsx(m.Item,{name:"detail",label:"详情",rules:[{required:!0,message:"详情不能为空"}],children:e.jsx(Ue,{})}),e.jsx(m.Item,{name:"tagId",label:"标签",rules:[{required:!n,message:"请选择一个标签"}],children:e.jsx(P,{options:o.tags.map(i=>({label:`${i.name}-(${i.userName})`,value:i.id}))})}),e.jsx(m.Item,{children:e.jsx(de,{offsetBottom:16,children:e.jsx(h,{loading:o.loading,type:"primary",htmlType:"submit",children:t.id?"保存":"创建"})})})]})},Le=()=>{const t=c.useRef(null),a=c.useRef(null),{inputValue:s,delTag:n,handleCreateTag:o,setInputValue:l}=C(),{state:i}=c.useContext(S),[x]=z(i.tags,{containerTarget:t,wrapperTarget:a,itemHeight:60,overscan:10});return e.jsxs("div",{children:[e.jsxs(I.Compact,{className:"w-100",children:[e.jsx(E,{placeholder:"请输入",value:s,onChange:u=>l(u.target.value)}),e.jsx(h,{loading:i.loading,type:"primary",onClick:o,children:"添加"})]}),e.jsx("div",{ref:t,style:{height:window.innerHeight/2,overflow:"auto",marginTop:16},children:e.jsx("div",{ref:a,children:x.map(u=>{var b;return e.jsx("div",{style:{height:52,display:"flex",justifyContent:"center",alignItems:"center",border:"1px solid #e8e8e8",marginBottom:8},children:e.jsxs("div",{className:"between w-100",children:[e.jsxs("div",{className:"between",children:[u.data.name,((b=i.user)==null?void 0:b.role)==="0"&&e.jsx(_,{title:"删除将无法恢复,确定删除?",onConfirm:()=>n(u.data.id),children:e.jsx(h,{children:" 删除"})})]}),e.jsx("div",{children:e.jsx(I,{children:e.jsxs("span",{children:["创建人：",u.data.userName||"--"]})})})]})},u.data.id)})})})]})},ke=({children:t,...a})=>c.isValidElement(t)?c.cloneElement(t,{...a}):t,D=({title:t,btnName:a,children:s,...n})=>{const[o,l]=Ee({open:!1});return e.jsxs(e.Fragment,{children:[e.jsx(h,{type:"link",onClick:()=>l({open:!0}),children:a}),e.jsx(ce,{destroyOnClose:!0,open:o.open,title:t,placement:"right",width:"100%",onClose:()=>l({open:!1}),children:e.jsx(ke,{onClose:()=>l({open:!1}),...n,children:o&&s})})]})},Pe=()=>{const{login:t}=C(),{state:a}=c.useContext(S);return e.jsxs(m,{...M,name:"login",onFinish:t,scrollToFirstError:!0,children:[e.jsx(m.Item,{name:"mobile",label:"手机号",rules:[{required:!0,message:"请输入你的手机号!"}],children:e.jsx(E,{className:"w-100"})}),e.jsx(m.Item,{name:"password",label:"密码",rules:[{required:!0,message:"请输入密码!"}],hasFeedback:!0,children:e.jsx(E.Password,{})}),e.jsx(m.Item,{...R,children:e.jsx(h,{loading:a.loading,type:"primary",htmlType:"submit",children:"登录"})})]})},ve=({onClose:t})=>{const{register:a}=C(),{state:s}=c.useContext(S);return e.jsxs(m,{...M,name:"register",onFinish:n=>a(n,t),scrollToFirstError:!0,children:[e.jsx(m.Item,{name:"nickname",label:"昵称",rules:[{required:!0,message:"请输入你的昵称!",whitespace:!0}],children:e.jsx(E,{})}),e.jsx(m.Item,{name:"mobile",label:"手机号",rules:[{required:!0,message:"请输入你的手机号!"}],children:e.jsx(E,{className:"w-100"})}),e.jsx(m.Item,{name:"password",label:"密码",rules:[{required:!0,message:"请输入密码!"}],hasFeedback:!0,children:e.jsx(E.Password,{})}),e.jsx(m.Item,{name:"confirm",label:"确认密码",dependencies:["password"],hasFeedback:!0,rules:[{required:!0,message:"请再次输入密码!"},({getFieldValue:n})=>({validator(o,l){return!l||n("password")===l?Promise.resolve():Promise.reject(new Error("两次密码不匹配!"))}})],children:e.jsx(E.Password,{})}),e.jsx(m.Item,{...R,children:e.jsx(h,{loading:s.loading,type:"primary",htmlType:"submit",children:"注册"})})]})},Ne=()=>{const t=c.useRef(null),a=c.useRef(null),{users:s,delUser:n,getUsers:o}=C(),{state:l}=c.useContext(S),[i]=z(s,{containerTarget:t,wrapperTarget:a,itemHeight:60,overscan:10});return J(()=>{o()}),e.jsx("div",{ref:t,style:{height:window.innerHeight/2,overflow:"auto"},children:e.jsx("div",{ref:a,children:i.map(x=>{var u;return e.jsx("div",{style:{height:52,display:"flex",justifyContent:"center",alignItems:"center",border:"1px solid #e8e8e8",marginBottom:8},children:e.jsxs("div",{className:"between w-100",children:[e.jsxs("div",{className:"between",children:["用户名：",x.data.nickname,((u=l.user)==null?void 0:u.role)==="0"&&e.jsx(_,{title:"删除将无法恢复,确定删除?",onConfirm:()=>n(x.data),children:e.jsx(h,{children:" 删除"})})]}),e.jsx("div",{children:e.jsxs(I,{children:[e.jsxs("span",{children:["创建日期：",A(x.data.createdAt).subtract(8,"h").format("YYYY-MM-DD")]}),e.jsxs("span",{children:["更新日期：",A(x.data.updatedAt).subtract(8,"h").format("YYYY-MM-DD")]})]})})]})},x.data.id)})})})},Ye=({onClose:t})=>{const{getAllTodo:a}=C(),{state:s}=c.useContext(S);return e.jsxs(m,{initialValues:{operationSource:"h5",isFinish:"0"},...M,name:"search",onFinish:n=>{a(n),t()},scrollToFirstError:!0,children:[e.jsx(m.Item,{name:"name",label:"名称",children:e.jsx(E,{className:"w-100"})}),e.jsx(m.Item,{name:"tagId",label:"标签",children:e.jsx(P,{className:"w-100",options:s.tags.map(n=>({label:`${n.name}-(${n.userName})`,value:n.id}))})}),e.jsx(m.Item,{name:"operationSource",label:"来源",children:e.jsx(P,{className:"w-100",options:[{label:"h5",value:"h5"},{label:"微信",value:"wx"}]})}),e.jsx(m.Item,{name:"isFinish",label:"状态",children:e.jsx(P,{className:"w-100",options:[{label:"进行中",value:"0"},{label:"已完成",value:"1"}]})}),e.jsx(m.Item,{...R,children:e.jsx(h,{loading:s.loading,type:"primary",htmlType:"submit",children:"搜索"})})]})},{Header:_e,Content:Oe}=$,Me=()=>{const{signOut:t,getAllTodo:a,switchData:s,switchService:n}=C(),{state:o}=c.useContext(S),l=[{key:"0",label:e.jsx(D,{title:"标签",btnName:"标签",children:e.jsx(Le,{})})},{key:"1",label:e.jsx(D,{title:"登陆",btnName:"登陆",children:e.jsx(Pe,{})})},{key:"2",label:e.jsx(D,{title:"注册",btnName:"注册",children:e.jsx(ve,{})})},{key:"3",label:o.user&&o.user.role==="0"&&e.jsx(D,{title:"用户管理",btnName:"用户管理",children:e.jsx(Ne,{})})},{key:"4",label:e.jsx(h,{type:"link",onClick:t,children:"登出"})},{key:"5",label:e.jsx(h,{type:"link",onClick:n,children:localStorage.getItem("USE_LOCAL_SERVICE")==="0"?"本地环境":"线上环境"})},{key:"6",label:e.jsx(h,{type:"link",onClick:s,children:localStorage.getItem("USE_LOCAL_DATA")==="0"?"本地数据":"接口数据"})}];return e.jsxs($,{className:"ndzy-layout",children:[e.jsx(_e,{className:"ndzy-header",children:e.jsxs(I,{className:"mb-16",children:[o.user?e.jsx("div",{style:{minWidth:33},className:"sky-blue center",children:o.user.name||o.user.nickname}):e.jsx("div",{style:{minWidth:33},className:"sky-blue center",children:"游客"}),e.jsx(D,{title:"新建",btnName:"新建",children:e.jsx(Y,{})}),e.jsx(D,{title:"搜索",btnName:"搜索",children:e.jsx(Ye,{})}),e.jsx(h,{type:"link",onClick:()=>a(),children:"重置"}),e.jsx(me,{menu:{items:l},children:e.jsx("a",{onClick:i=>i.preventDefault(),children:"其他"})})]})}),e.jsx(Oe,{children:e.jsx("div",{className:"layout-content p-16",children:e.jsx(fe,{})})})]})},Re=({value:t})=>{const a=O();return e.jsx("div",{style:{padding:"0 8px"},id:`preview-${a}`,className:"ndzy-preview",dangerouslySetInnerHTML:{__html:t}})},Be=t=>e.jsxs(D,{title:"查看",btnName:"查看",children:[e.jsx(Re,{value:t.detail}),e.jsx("div",{children:e.jsxs(I,{children:[e.jsxs("span",{style:{color:"blue"},children:["创建人：",t.userName||"--"]}),e.jsxs("span",{style:{color:"green"},children:["标签：",t.tagName||"--"]}),e.jsxs("span",{style:{color:"red"},children:["终止日期：",A(t.deadline).format("YYYY-MM-DD")]})]})}),e.jsx("div",{children:e.jsxs(I,{children:[e.jsxs("span",{children:["创建日期：",A(t.createdAt).subtract(8,"h").format("YYYY-MM-DD")]}),e.jsxs("span",{children:["更新日期：",A(t.updatedAt).subtract(8,"h").format("YYYY-MM-DD")]})]})})]}),Fe=()=>{const{state:t}=c.useContext(S),{initUser:a,initTags:s,getAllTodo:n,finishTodo:o,delTodo:l,recoverTodo:i,delLocalData:x,isLocal:u}=C();J(()=>{a(),s(),n()});const b=[{title:"名称",dataIndex:"name",width:80},{title:"进度",dataIndex:"deadline",width:80,render:(T,j)=>{if(Number(j.isFinish)===0)return e.jsx("span",{style:{color:"red"},children:"处理中"});if(Number(j.isFinish)===1)return e.jsx("span",{style:{color:"green"},children:"已完成"})}},{title:"截止日期",dataIndex:"deadline",width:80},{title:"标签",dataIndex:"tagName",width:80},{title:"用户",dataIndex:"userName",width:80},{title:"创建时间",dataIndex:"createdAt",width:120},{title:"更新时间",dataIndex:"updatedAt",width:120},{title:"操作",width:100,fixed:"right",render:(T,j)=>e.jsxs(I,{children:[e.jsx(Be,{...j}),u&&e.jsx(D,{title:"编辑",btnName:"编辑",...j,children:e.jsx(Y,{})}),u&&e.jsx(h,{type:"link",onClick:()=>x(j.id),children:"删除"}),u&&e.jsx(h,{type:"link",onClick:()=>{},children:"同步"}),Number(j.isFinish)===0?e.jsxs(I,{children:[e.jsx(D,{title:"编辑",btnName:"编辑",...j,children:e.jsx(Y,{})}),e.jsx(h,{type:"link",onClick:()=>o(j),children:"完成"})]}):Number(j.isFinish)===1?e.jsxs(I,{children:[e.jsx(h,{type:"link",onClick:()=>i(j),children:"恢复"}),e.jsx(_,{title:"删除将无法恢复,确定删除?",onConfirm:()=>l(j),children:e.jsx(h,{type:"link",children:" 删除"})})]}):null]})}];return e.jsxs("div",{children:[e.jsx("div",{className:"center",children:t.loading&&e.jsx(pe,{})}),e.jsx(ue,{virtual:!0,columns:b,scroll:{x:2e3,y:600},rowKey:"id",dataSource:t.list,pagination:!1,locale:{emptyText:e.jsx("div",{className:"center",children:"暂无待办事项"})}})]})},Ve=()=>e.jsx("div",{className:"center",children:e.jsxs("div",{children:[e.jsx("h2",{children:"页面不存在"}),e.jsx("p",{children:e.jsx(ne,{to:"/",children:"返回首页"})})]})}),He=()=>{const[t,a]=c.useReducer(Ie,K);return e.jsx(he,{locale:xe,children:e.jsx(S.Provider,{value:{state:t,dispatch:a},children:e.jsx(je,{children:e.jsxs(N,{path:"/ndzy-todos/",element:e.jsx(Me,{}),children:[e.jsx(N,{index:!0,element:e.jsx(Fe,{})}),e.jsx(N,{path:"*",element:e.jsx(Ve,{})})]})})})})};re.createRoot(document.getElementById("root")).render(e.jsx(oe.StrictMode,{children:e.jsx(le,{children:e.jsx(He,{})})}));
