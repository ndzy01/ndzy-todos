import{r as u}from"./react-10p77hjm.js";import"./dayjs-MKOyeQCS.js";import{_ as w,a as F}from"./tslib-9i2l26Ba.js";import{i as D}from"./resize-observer-polyfill-B32NGzNS.js";var G=function(e){return function(t,r){var f=u.useRef(!1);e(function(){return function(){f.current=!1}},[]),e(function(){if(!f.current)f.current=!0;else return t()},r)}},A=function(e){return typeof e=="function"},T=function(e){return typeof e=="number"};function J(e){var t=u.useRef(e);t.current=u.useMemo(function(){return e},[e]);var r=u.useRef();return r.current||(r.current=function(){for(var f=[],n=0;n<arguments.length;n++)f[n]=arguments[n];return t.current.apply(this,f)}),r.current}const K=G(u.useEffect);function H(e,t){if(e===t)return!0;for(var r=0;r<e.length;r++)if(!Object.is(e[r],t[r]))return!1;return!0}function y(e){var t=u.useRef(e);return t.current=e,t}var x=function(e){var t=y(e);u.useEffect(function(){return function(){t.current()}},[])},z=!!(typeof window<"u"&&window.document&&window.document.createElement),ae=function(e){u.useEffect(function(){e==null||e()},[])};function E(e,t){if(z){if(!e)return t;var r;return A(e)?r=e():"current"in e?r=e.current:r=e,r}}var O=function(e){var t=function(r,f,n){var o=u.useRef(!1),v=u.useRef([]),c=u.useRef([]),a=u.useRef();e(function(){var d,R=Array.isArray(n)?n:[n],p=R.map(function(S){return E(S)});if(!o.current){o.current=!0,v.current=p,c.current=f,a.current=r();return}(p.length!==v.current.length||!H(p,v.current)||!H(f,c.current))&&((d=a.current)===null||d===void 0||d.call(a),v.current=p,c.current=f,a.current=r())}),x(function(){var d;(d=a.current)===null||d===void 0||d.call(a),o.current=!1})};return t},P=O(u.useEffect);const k=P;function Q(e,t,r){r===void 0&&(r={});var f=y(t);k(function(){var n=E(r.target,window);if(n!=null&&n.addEventListener){var o=function(v){return f.current(v)};return n.addEventListener(e,o,{capture:r.capture,once:r.once,passive:r.passive}),function(){n.removeEventListener(e,o,{capture:r.capture})}}},[e,r.capture,r.once,r.passive],r.target)}function X(e){var t=u.useRef(0),r=w(u.useState(e),2),f=r[0],n=r[1],o=u.useCallback(function(v){cancelAnimationFrame(t.current),t.current=requestAnimationFrame(function(){n(v)})},[]);return x(function(){cancelAnimationFrame(t.current)}),[f,o]}var ce=function(e){var t=w(u.useState(e),2),r=t[0],f=t[1],n=u.useCallback(function(o){f(function(v){var c=A(o)?o(v):o;return c?F(F({},v),c):v})},[]);return[r,n]},Y=O(u.useLayoutEffect),Z=z?Y:k;function N(e){var t=w(X(function(){var n=E(e);return n?{width:n.clientWidth,height:n.clientHeight}:void 0}),2),r=t[0],f=t[1];return Z(function(){var n=E(e);if(n){var o=new D(function(v){v.forEach(function(c){var a=c.target,d=a.clientWidth,R=a.clientHeight;f({width:d,height:R})})});return o.observe(n),function(){o.disconnect()}}},[],e),r}var ee=function(e,t){var r=t.containerTarget,f=t.wrapperTarget,n=t.itemHeight,o=t.overscan,v=o===void 0?5:o,c=y(n),a=N(r),d=u.useRef(!1),R=w(u.useState([]),2),p=R[0],S=R[1],_=w(u.useState({}),2),b=_[0],C=_[1],U=function(i,s){if(T(c.current))return Math.ceil(i/c.current);for(var h=0,l=0,g=s;g<e.length;g++){var m=c.current(g,e[g]);if(h+=m,l=g,h>=i)break}return l-s},V=function(i){if(T(c.current))return Math.floor(i/c.current)+1;for(var s=0,h=0,l=0;l<e.length;l++){var g=c.current(l,e[l]);if(s+=g,s>=i){h=l;break}}return h+1},M=function(i){if(T(c.current)){var s=i*c.current;return s}var h=e.slice(0,i).reduce(function(l,g,m){return l+c.current(m,e[m])},0);return h},$=u.useMemo(function(){return T(c.current)?e.length*c.current:e.reduce(function(i,s,h){return i+c.current(h,e[h])},0)},[e]),L=function(){var i=E(r);if(i){var s=i.scrollTop,h=i.clientHeight,l=V(s),g=U(h,l),m=Math.max(0,l-v),B=Math.min(e.length,l+g+v),W=M(m);C({height:$-W+"px",marginTop:W+"px"}),S(e.slice(m,B).map(function(I,q){return{data:I,index:q+m}}))}};K(function(){var i=E(f);i&&Object.keys(b).forEach(function(s){return i.style[s]=b[s]})},[b]),u.useEffect(function(){!(a!=null&&a.width)||!(a!=null&&a.height)||L()},[a==null?void 0:a.width,a==null?void 0:a.height,e]),Q("scroll",function(i){if(d.current){d.current=!1;return}i.preventDefault(),L()},{target:r});var j=function(i){var s=E(r);s&&(d.current=!0,s.scrollTop=M(i),L())};return[p,J(j)]};const ie=ee;export{ce as a,ae as b,ie as u};
